package com.imajuk.ui.combobox{    import com.imajuk.color.Color;    import com.imajuk.constructions.AppDomainRegistry;    import com.imajuk.constructions.DocumentClass;    import com.imajuk.service.AssetLocation;    import com.imajuk.service.IAssetLocation;    import com.imajuk.service.PreLoader;    import com.imajuk.service.PreLoaderThread;    import com.imajuk.ui.combobox.view.SampleButton;    import com.imajuk.ui.combobox.view.SampleComboBoxItem;    import flash.display.Sprite;    import flash.net.URLRequest;    import org.libspark.thread.Thread;    /**     * @author shinyamaharu     */    public class ComboboxSampleMainThread extends Thread     {        private var data_market : XML;        public function ComboboxSampleMainThread()        {            super();        }        override protected function run() : void        {            next(loadAssets);        }        private function loadAssets() : void        {        	var a : IAssetLocation =         		new AssetLocation()        			.add(		            	new URLRequest("assets/comboSampleAssets.swf"), 			            function(d : Sprite):void			            {			                AppDomainRegistry.getInstance().resisterAppDomain(d);			            })			        .add(			        	new URLRequest("xml/SepCounterCouponList-HS.txt"), 			        	function(txt:String):void			        	{			                data_market = TabDemiliterParser.parse(txt);			        	});                        var preloader : PreLoader = new PreLoader();            var t : Thread = new PreLoaderThread(preloader, a);            t.start();            t.join();                        next(buildCombobox);        }                private function buildCombobox() : void        {        	/********************************************             * ComboBox             */                         /**             * province button             */            var province1:SampleComboBoxItem =             	new SampleComboBoxItem(            		"$Promotion_btn_arrow",                    "$FontContainer",                    133,                    27,                    5,                    5);                        /**             * city button             */            var city:SampleComboBoxItem =                 province1.clone() as SampleComboBoxItem;                            /**             * search button             */            var search:SampleButton =             	new SampleButton(            		"$Promotion_btn_icon_search",                    "$Promotion_btn_lebel_search",                    133,                    27,                    5,                    35);        	var itemColor:Color = ColorConfig.DARK_RED;        	            //create comboBox (province)            var combo_province:ComboBox =                 new ComboBox(province1, province1.clone(), "省份", false, "province", true);            combo_province.rowCount = 5;            combo_province.setItemColor(itemColor);            combo_province.y = 300;            DocumentClass.container.addChild(combo_province);                        //create comboBox (city)            var combo_city:ComboBox = new ComboBox(city, city.clone(), "城市", false, "city", true);            combo_city.rowCount = 5;            combo_city.setItemColor(itemColor);            combo_city.x = combo_province.width + 5;            combo_city.y = 300;            DocumentClass.container.addChild(combo_city);                        //layout submit button            search.x = combo_city.x + combo_city.width + 5;            search.y = 300;            DocumentClass.container.addChild(search);                        //mediate            new InteractionThread(            		combo_province,             		combo_city,            		data_market,            		search            ).start();          }        override protected function finalize() : void        {        }    }}