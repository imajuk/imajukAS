package com.imajuk.media{    import fl.video.VideoEvent;    import org.libspark.thread.Thread;    /**     * @author shinyamaharu     */    public class VideoPlaybackProgressThread extends Thread     {        private var video : SimpleFLVPlayer;
        private var videoUI : IVideoUI;
        public function VideoPlaybackProgressThread(video:SimpleFLVPlayer, videoUI:IVideoUI)        {            super();                        this.video = video;            this.videoUI = videoUI;        }        override protected function run() : void        {        	if (isInterrupted) return;            interrupted(function():void{});                    	event(video, VideoEvent.PLAYHEAD_UPDATE, playheadUpdateHandler);        }                private function playheadUpdateHandler(e : VideoEvent) : void        {            if (isInterrupted) return;                        var per : Number = video.playheadTime / video.duration;            if (isNaN(per))            {                run();                return;            }                            videoUI.updateProgressBar(per);                        run();        }        override protected function finalize() : void        {        }    }}