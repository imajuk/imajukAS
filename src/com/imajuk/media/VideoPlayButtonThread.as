package com.imajuk.media{    import fl.video.VideoState;    import com.imajuk.interfaces.IDisplayObjectWrapper;    import org.libspark.thread.Thread;    import flash.display.MovieClip;    import flash.events.MouseEvent;    /**     * @author shinyamaharu     */    public class VideoPlayButtonThread extends Thread     {    	private var status : String;        private var videoUI : IVideoUI;
        private var video : SimpleFLVPlayer;
        public function VideoPlayButtonThread(video:SimpleFLVPlayer, videoUI:IVideoUI, autoStart:Boolean)        {            super();                        this.video = video;            this.videoUI = videoUI;            
            status = autoStart ? VideoState.PLAYING : VideoState.PAUSED ;        }        override protected function run() : void        {        	if (isInterrupted) return;            interrupted(function():void{});                    	event(videoUI.playButton, MouseEvent.MOUSE_UP, playButtonReleaseHandler);        }                private function playButtonReleaseHandler(e : MouseEvent) : void         {        	if (isInterrupted) return;        	            var btn : IDisplayObjectWrapper = IDisplayObjectWrapper(e.currentTarget);            var m : MovieClip = btn.asset as MovieClip;            if(status == VideoState.PLAYING)            {                status = VideoState.PAUSED;                video.pause();                if (m)                    m.gotoAndStop("2");            }            else            {                status = VideoState.PLAYING;                video.resume();                if (m)                    m.gotoAndStop("1");            }                        run();        }        override protected function finalize() : void        {        }    }}