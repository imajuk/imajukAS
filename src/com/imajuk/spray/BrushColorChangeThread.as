package com.imajuk.spray{	    import com.imajuk.motion.TweensyThread;    import com.imajuk.color.Color;    import fl.motion.easing.Quadratic;    import org.libspark.thread.Thread;    /**     * @author shinyamaharu     */    public class BrushColorChangeThread extends Thread     {        private var spray : Spray;        private var _hue : int = 0;        private var duration : Number;        public function get hue() : int        {            return _hue;        }        public function set hue(value : int) : void        {            if (_hue == value)            	return;            	            _hue = value;            spray.color = Color.fromHSV(_hue, 70, 90).argb;        }        public function BrushColorChangeThread(spray : Spray, duration : Number)        {            super();            this.spray = spray;            this.duration = duration;        }        override protected function run() : void        {        	if (isInterrupted)        		return;        		            next(exec1);        }        private function exec1() : void        {            interrupted(function():void            {            });        	            var t : Thread = new TweensyThread(this, 0, duration * .5, Quadratic.easeInOut, null, {hue:360});            t.start();            t.join();        	            next(exec2);        }        private function exec2() : void        {            interrupted(function():void            {            });            var t : Thread = new TweensyThread(this, 0, duration * .5, Quadratic.easeInOut, null, {hue:0});            t.start();            t.join();        	            next(exec1);        }        override protected function finalize() : void        {        }    }}